{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MathJaxProvider = void 0;\n\nconst react_1 = __importStar(require(\"react\"));\n\nconst MathJaxContext = react_1.createContext({});\n\nexports.MathJaxProvider = ({\n  options = {},\n  children = null\n}) => {\n  const ref = react_1.useRef(null);\n  const [mathJax, setMathJax] = react_1.useState(window.MathJax || options);\n  react_1.useEffect(() => {\n    var _a;\n\n    if (!window.MathJax) {\n      const script = document.createElement(\"script\");\n      window.MathJax = mathJax;\n      script.src = \"https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js\";\n      script.async = true;\n\n      script.onload = () => setMathJax(window.MathJax);\n\n      (_a = ref.current) === null || _a === void 0 ? void 0 : _a.appendChild(script);\n      return () => {\n        var _a;\n\n        (_a = ref.current) === null || _a === void 0 ? void 0 : _a.removeChild(script);\n      };\n    }\n\n    return () => {};\n  });\n  return react_1.default.createElement(MathJaxContext.Provider, {\n    value: mathJax\n  }, react_1.default.createElement(\"span\", {\n    ref: ref\n  }), children);\n};\n\nconst Tex2SVG = _a => {\n  var {\n    latex = \"\",\n    onError = html => {},\n    onSuccess = html => {}\n  } = _a,\n      props = __rest(_a, [\"latex\", \"onError\", \"onSuccess\"]);\n\n  const mathJax = react_1.useContext(MathJaxContext) || null;\n  const [html, setHtml] = react_1.useState(null);\n  const ref = react_1.useRef(null);\n  const hasError = !!(html === null || html === void 0 ? void 0 : html.outerHTML.match(/data-mjx-error/));\n  react_1.useEffect(() => {\n    function setMathJaxHTML() {\n      var _a, _b;\n\n      return __awaiter(this, void 0, void 0, function* () {\n        try {\n          setHtml(yield (_b = (_a = mathJax) === null || _a === void 0 ? void 0 : _a.tex2svgPromise) === null || _b === void 0 ? void 0 : _b.call(_a, latex));\n        } catch (e) {\n          console.error(\"Something went really wrong, if this problem persists then please open an issue\", e);\n        }\n      });\n    }\n\n    setMathJaxHTML();\n  }, [mathJax, latex]);\n  react_1.useEffect(() => {\n    if (html && hasError) onError(html);\n    if (html && !hasError) onSuccess(html);\n  }, [html]);\n  react_1.useEffect(() => {\n    var _a;\n\n    if (html && !hasError) {\n      Object.keys(props).map(key => html.setAttribute(key, props[key]));\n      (_a = ref.current) === null || _a === void 0 ? void 0 : _a.appendChild(html);\n      return () => {\n        var _a;\n\n        (_a = ref.current) === null || _a === void 0 ? void 0 : _a.removeChild(html);\n      };\n    }\n\n    return () => {};\n  }, [props, html]);\n\n  if (!mathJax) {\n    console.error(\"MathJax is not available! Are you using <Tex2SVG> outside of <MathJaxContext>?\");\n    return null;\n  }\n\n  return react_1.default.createElement(\"span\", {\n    ref: ref\n  });\n};\n\nexports.default = Tex2SVG;","map":{"version":3,"sources":["../src/index.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MathJaxProvider = void 0;\nconst react_1 = __importStar(require(\"react\"));\nconst MathJaxContext = react_1.createContext({});\nexports.MathJaxProvider = ({ options = {}, children = null, }) => {\n    const ref = react_1.useRef(null);\n    const [mathJax, setMathJax] = react_1.useState(window.MathJax || options);\n    react_1.useEffect(() => {\n        var _a;\n        if (!window.MathJax) {\n            const script = document.createElement(\"script\");\n            window.MathJax = mathJax;\n            script.src = \"https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js\";\n            script.async = true;\n            script.onload = () => setMathJax(window.MathJax);\n            (_a = ref.current) === null || _a === void 0 ? void 0 : _a.appendChild(script);\n            return () => {\n                var _a;\n                (_a = ref.current) === null || _a === void 0 ? void 0 : _a.removeChild(script);\n            };\n        }\n        return () => { };\n    });\n    return (react_1.default.createElement(MathJaxContext.Provider, { value: mathJax },\n        react_1.default.createElement(\"span\", { ref: ref }),\n        children));\n};\nconst Tex2SVG = (_a) => {\n    var { latex = \"\", onError = (html) => { }, onSuccess = (html) => { } } = _a, props = __rest(_a, [\"latex\", \"onError\", \"onSuccess\"]);\n    const mathJax = react_1.useContext(MathJaxContext) || null;\n    const [html, setHtml] = react_1.useState(null);\n    const ref = react_1.useRef(null);\n    const hasError = !!(html === null || html === void 0 ? void 0 : html.outerHTML.match(/data-mjx-error/));\n    react_1.useEffect(() => {\n        function setMathJaxHTML() {\n            var _a, _b;\n            return __awaiter(this, void 0, void 0, function* () {\n                try {\n                    setHtml(yield ((_b = (_a = mathJax) === null || _a === void 0 ? void 0 : _a.tex2svgPromise) === null || _b === void 0 ? void 0 : _b.call(_a, latex)));\n                }\n                catch (e) {\n                    console.error(\"Something went really wrong, if this problem persists then please open an issue\", e);\n                }\n            });\n        }\n        setMathJaxHTML();\n    }, [mathJax, latex]);\n    react_1.useEffect(() => {\n        if (html && hasError)\n            onError(html);\n        if (html && !hasError)\n            onSuccess(html);\n    }, [html]);\n    react_1.useEffect(() => {\n        var _a;\n        if (html && !hasError) {\n            Object.keys(props).map((key) => html.setAttribute(key, props[key]));\n            (_a = ref.current) === null || _a === void 0 ? void 0 : _a.appendChild(html);\n            return () => {\n                var _a;\n                (_a = ref.current) === null || _a === void 0 ? void 0 : _a.removeChild(html);\n            };\n        }\n        return () => { };\n    }, [props, html]);\n    if (!mathJax) {\n        console.error(\"MathJax is not available! Are you using <Tex2SVG> outside of <MathJaxContext>?\");\n        return null;\n    }\n    return react_1.default.createElement(\"span\", { ref: ref });\n};\nexports.default = Tex2SVG;\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"script"}